<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Tables de Multiplication</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="../../style.css">

  <!-- Firebase compat scripts -->
  <script src="https://www.gstatic.com/firebasejs/12.3.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/12.3.0/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/12.3.0/firebase-firestore-compat.js"></script>

  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyCabQZ5O5mPkcAd2_W8dF6qiwA-s7QntRo",
      authDomain: "edu-hud.firebaseapp.com",
      projectId: "edu-hud",
      storageBucket: "edu-hud.appspot.com",
      messagingSenderId: "647416475215",
      appId: "1:647416475215:web:df8d67a5d6a7d516c5843a"
    };

    firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth();
    const db = firebase.firestore();

    // Vérification de connexion + affichage utilisateur
    auth.onAuthStateChanged(function(user) {
      if (user) {
        document.getElementById("userBar").style.display = "flex";
        const nom = user.displayName || user.email;
        document.getElementById("userInfo").textContent = `Connecté : ${nom}`;

        document.getElementById("logoutBtn").addEventListener("click", function() {
          auth.signOut().then(() => {
            window.location.href = "/index.html";
          });
        });
      } else {
        window.location.href = "/index.html";
      }
    });
  </script>
</head>

<body>
  <!-- Barre utilisateur -->
  <div class="user-bar" id="userBar" style="display:none; justify-content:space-between; align-items:center; margin-bottom:1em;">
    <img src="../../assets/user-icon.png" alt="Profil" class="user-icon" style="width:32px; height:32px; border-radius:50%; margin-right:0.5em;">
    <span id="userInfo" style="font-weight:bold;"></span>
    <button id="logoutBtn" style="background-color:#ef4444; color:white; border:none; padding:0.4em 0.8em; border-radius:4px; cursor:pointer;">Se déconnecter</button>
  </div>

  <p><a href="../../index.html" class="back-link">← Retour à l’accueil</a></p>

  <div class="container">
    <h1>Tables de multiplication</h1>
    <label>Choisis ta table :</label>
    <div id="table-buttons">
      <button class="table-btn" data-table="2">2</button>
      <button class="table-btn" data-table="3">3</button>
      <button class="table-btn" data-table="4">4</button>
      <button class="table-btn" data-table="5">5</button>
      <button class="table-btn" data-table="6">6</button>
      <button class="table-btn" data-table="7">7</button>
      <button class="table-btn" data-table="8">8</button>
      <button class="table-btn" data-table="9">9</button>
      <button class="table-btn" data-table="10">10</button>
    </div>

    <div id="score">
      Bonnes réponses : <span id="good-count">0</span> |
      <span id="bad-count">Mauvaises réponses : 0</span>
    </div>

    <div id="quiz" class="hidden">
      <p id="question"></p>
      <div id="answers"></div>
      <p id="feedback"></p>
    </div>
  </div>

  <!-- Script principal -->
  <script src="app.js"></script>
</body>
</html>
